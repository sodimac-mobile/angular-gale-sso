{"version":3,"file":"angular-gale-sso.min.js","sources":["angular-gale-sso.js"],"names":["angular","module","run","$templateCache","put","manifiest","directive","$log","$q","$cordovaSingleSignOn","restrict","scope","onLoginSuccess","onLoginError","scopes","templateUrl","controller","$scope","$element","$timeout","vm","model","isLoading","_scopes","oauth2","$$buildAuthorization","iframe","find","attr","oauth2Url","isLoaded","bind","delay","cancel","finaly","windowElm","element","window","fn","e","origin","hostToMatch","data","indexOf","callbackUrl","unbind","parser","then","handler","$on","provider","$this","this","_appId","_ssoBaseURL","_ssoBaseAuthURL","_ssoLabel","setAppId","value","setApiUrl","endsWith","setApiAuthUrl","$get","$Api","$Identity","$LocalStorage","self","_authResponse","isAuthenticated","connected","access_token","getAccessToken","getAppId","Error","getApiUrl","getApiAuthUrl","parseFragment","uri","parsed","defer","qs","substring","split","build","tokens","j","q","text","prop","name","replace","parseInt","setTimeout","isSuccess","ok","forEach","j1","result","authResponse","status","setObject","resolve","j2","reject","error","promise","permissions","settings","_settings","join","response_type","redirect_uri","state","prompt","curr_bearerToken","getObject","api_url","host_url","pathArray","protocol","host","url","callback_url","location","oauth2_url","login","mode","ionic","Platform","isWebView","inApp_features","browser","cordova","InAppBrowser","open","addEventListener","close","height","width","left","screen","top","browser_features","api","query","accessToken","read","sso_url","Authorization","success","err"],"mappings":"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"}